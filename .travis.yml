language: generic
sudo: required

branches:
  only:
    - master

os:
  - linux
  - osx

env:
  - SH=mksh
  - SH=dash
  - SH=bash
  - SH=zsh

before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update      ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install $SH ; fi
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get -qq update     ; fi
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get install -y $SH ; fi

script:
  - TEST_SH=$SH ./test/run
